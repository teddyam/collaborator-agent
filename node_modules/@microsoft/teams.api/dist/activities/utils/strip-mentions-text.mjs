function stripMentionsText(activity, { accountId, tagOnly } = {}) {
  if (!activity.text) return;
  let text = activity.text;
  for (const mention of activity.entities?.filter((e) => e.type === "mention") || []) {
    if (accountId && mention.mentioned.id !== accountId) {
      continue;
    }
    if (mention.text) {
      const textWithoutTags = mention.text.replace("<at>", "").replace("</at>", "");
      text = text.replace(mention.text, !tagOnly ? "" : textWithoutTags);
    } else {
      text = text.replace(
        `<at>${mention.mentioned.name}</at>`,
        !tagOnly ? "" : mention.mentioned.name
      );
    }
  }
  return text.trim();
}

export { stripMentionsText };
//# sourceMappingURL=strip-mentions-text.mjs.map
//# sourceMappingURL=strip-mentions-text.mjs.map